<canvas id="ctx" width="500" height="500" style="border:1px solid #000000;"></canvas>

<script src="https://cdn.socket.io/socket.io-1.4.3.js"></script>
<script>
	var ctx = document.getElementById("ctx").getContext("2d");
	//change this
	var canvasWidth = 500;
	
	ctx.font = '30px Arial';
	var socket = io();
	
	var mouseWheelDir = 'none';
	var mouseClick = false;
	var mouseX;
	var mouseY;
	var selectedColour = '#000000';
	var isGrid = true;
	var offsetX = 0;
	var offsetY = 0;
	
		
	
	document.onmousewheel = function(e) {
	
		if(e.wheelDelta>0){
			mouseWheelDir = 'up';
		}
		else if(e.wheelDelta<0){
			mouseWheelDir = 'down';
		}
		else{
			mouseWheelDir = 'none';
		}
		//console.log(mouseWheelDir);  //testing function
	}
	document.onmousedown = function(e){
	if(e.pageX<=500&&e.pageY<=500){
		mouseClick = true
		mouseX = e.pageX;
		mouseY = e.pageY;
		}
	}
	document.onkeypress = function(e){
		if(e.key=='w'){
			if(offsetY>0){
				offsetY-=1;
			}
		}
		if(e.key=='a'){
			if(offsetX>0){
				offsetX-=1;
			}
		}
		if(e.key=='s'){
			offsetY +=1;
		}
		if(e.key=='d'){
			offsetX += 1;
		}
		document.getElementById("coordinates").innerHTML = offsetX + " / " + offsetY;
	}
	
	var changeGrid = function(){
		if(isGrid==true){
			isGrid=false;
		}
		else{
			isGrid=true;
		}
	}
	
	var getColour = function(){
		selectedColour = document.getElementById("selectedColour").value;;
	}
	
	
	//save place on .json and pan around with camera using wasd and mouse (also some zoom pls) fix mouse when zoomed out
	socket.on('inputRequest', function(){
		socket.emit('input',{
			mouseWheelDir:mouseWheelDir,
			mouseClick:mouseClick,
			mouseX:mouseX,
			mouseY:mouseY,
			selectedColour:selectedColour,
			offsetX:offsetX,
			offsetY:offsetY
		});
		mouseWheelDir = 'none';
		mouseClick = false;
	});
	
	
	socket.on('place', function(data){
		ctx.clearRect(0,0,canvasWidth,canvasWidth);
		
		//Pixels drawn
		for(var x = 0;x<canvasWidth/data.zoom;x++){
				if(data.placeGrid[Math.round(x+data.x)]!=null){
					for(var y = 0;y<data.placeGrid[Math.round(x+data.x)].length;y++){
					if(data.placeGrid[Math.round(x+data.x)][Math.round(y+data.y)]!=null){
				ctx.fillStyle = data.placeGrid[Math.round(x+data.x)][Math.round(y+data.y)];
				ctx.fillRect(x*data.zoom,y*data.zoom,data.zoom,data.zoom);
				}
			}
		}
		}
		
		//Grid drawn
		if(isGrid){
		for(var i = 0;i<canvasWidth/data.zoom;i++){
			ctx.fillStyle = '#000000';
			ctx.fillRect(data.zoom*i,0,1,canvasWidth);
			ctx.fillRect(0,data.zoom*i,canvasWidth,1)
		}}
	});
	
	socket.on('newTimer',function(data){
		ctx.Text(data.timer,250,50);
	});
</script>
<br>
<button onclick="changeGrid()">enable/disable Grid</button>
<p id="coordinates"><p>
<br>
<input type="text" id="selectedColour" name="colour" maxlength="7">
<button onclick="getColour()">Submit Colour</button>